

\tikzset{every picture/.style={line width=0.75pt}} %set default line width to 0.75pt        

\begin{tikzpicture}[x=0.75pt,y=0.75pt,yscale=-1,xscale=1]
%uncomment if require: \path (0,763); %set diagram left start at 0, and has height of 763

%Curve Lines [id:da9480858267519683] 
\draw    (201.5,185) .. controls (235.16,142.43) and (344.78,139.06) .. (377.05,182.66) ;
\draw [shift={(378,184)}, rotate = 235.44] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Ellipse [id:dp6594609066072359] 
\draw   (91.5,212) .. controls (91.5,198.19) and (118.14,187) .. (151,187) .. controls (183.86,187) and (210.5,198.19) .. (210.5,212) .. controls (210.5,225.81) and (183.86,237) .. (151,237) .. controls (118.14,237) and (91.5,225.81) .. (91.5,212) -- cycle ;
%Shape: Ellipse [id:dp873836537729809] 
\draw   (368,205.5) .. controls (368,191.42) and (394.53,180) .. (427.25,180) .. controls (459.97,180) and (486.5,191.42) .. (486.5,205.5) .. controls (486.5,219.58) and (459.97,231) .. (427.25,231) .. controls (394.53,231) and (368,219.58) .. (368,205.5) -- cycle ;
%Curve Lines [id:da14662580418826565] 
\draw    (485.5,428) .. controls (538.96,423.05) and (565.96,389.68) .. (574.25,345.35) ;
\draw [shift={(574.5,344)}, rotate = 460.08] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Straight Lines [id:da37650774099478246] 
\draw    (203.5,18) -- (234.11,28.36) ;
\draw [shift={(236,29)}, rotate = 198.7] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Ellipse [id:dp8139093405894636] 
\draw   (92,423) .. controls (92,409.19) and (118.53,398) .. (151.25,398) .. controls (183.97,398) and (210.5,409.19) .. (210.5,423) .. controls (210.5,436.81) and (183.97,448) .. (151.25,448) .. controls (118.53,448) and (92,436.81) .. (92,423) -- cycle ;
%Shape: Ellipse [id:dp08678607998247811] 
\draw   (362,422) .. controls (362,408.19) and (388.53,397) .. (421.25,397) .. controls (453.97,397) and (480.5,408.19) .. (480.5,422) .. controls (480.5,435.81) and (453.97,447) .. (421.25,447) .. controls (388.53,447) and (362,435.81) .. (362,422) -- cycle ;
%Shape: Ellipse [id:dp07482494496489733] 
\draw   (241,32) .. controls (241,18.75) and (267.53,8) .. (300.25,8) .. controls (332.97,8) and (359.5,18.75) .. (359.5,32) .. controls (359.5,45.25) and (332.97,56) .. (300.25,56) .. controls (267.53,56) and (241,45.25) .. (241,32) -- cycle ;
%Curve Lines [id:da6759956440889884] 
\draw    (94.5,230) .. controls (71.84,275.31) and (79.27,368.16) .. (97.65,405.34) ;
\draw [shift={(98.5,407)}, rotate = 242.18] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Curve Lines [id:da9572857730465772] 
\draw    (205.22,232.76) .. controls (231.54,272.31) and (232.61,380.42) .. (207,408) ;
\draw [shift={(204,231)}, rotate = 54.11] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Curve Lines [id:da9385545433271328] 
\draw    (488.5,319) .. controls (450.88,330.88) and (434.82,343.74) .. (428.68,389.6) ;
\draw [shift={(428.5,391)}, rotate = 277.28] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Curve Lines [id:da13526468384837043] 
\draw    (411.5,177) .. controls (397.78,123.1) and (372.54,74) .. (348.94,54.18) ;
\draw [shift={(347.5,53)}, rotate = 398.37] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Curve Lines [id:da7876400787103589] 
\draw    (238.5,49) .. controls (209.79,67.81) and (184.02,110.14) .. (172.83,174.06) ;
\draw [shift={(172.5,176)}, rotate = 279.61] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Shape: Ellipse [id:dp538933115831977] 
\draw   (495,314) .. controls (495,300.19) and (521.3,289) .. (553.75,289) .. controls (586.2,289) and (612.5,300.19) .. (612.5,314) .. controls (612.5,327.81) and (586.2,339) .. (553.75,339) .. controls (521.3,339) and (495,327.81) .. (495,314) -- cycle ;
%Curve Lines [id:da663291454681702] 
\draw    (489.5,209) .. controls (537.52,209) and (553.85,249.34) .. (555.42,282.01) ;
\draw [shift={(555.5,284)}, rotate = 268.26] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Curve Lines [id:da17641910717404863] 
\draw    (384.5,395) .. controls (365.69,327.68) and (270.43,245.66) .. (217.1,220.74) ;
\draw [shift={(215.5,220)}, rotate = 384.36] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;
%Rounded Rect [id:dp2887172897272543] 
\draw   (20,546.88) .. controls (20,540.32) and (25.32,535) .. (31.88,535) -- (598.12,535) .. controls (604.68,535) and (610,540.32) .. (610,546.88) -- (610,738.12) .. controls (610,744.68) and (604.68,750) .. (598.12,750) -- (31.88,750) .. controls (25.32,750) and (20,744.68) .. (20,738.12) -- cycle ;
%Rounded Rect [id:dp07131134126212679] 
\draw   (19,477.2) .. controls (19,471.01) and (24.01,466) .. (30.2,466) -- (596.8,466) .. controls (602.99,466) and (608,471.01) .. (608,477.2) -- (608,510.8) .. controls (608,516.99) and (602.99,522) .. (596.8,522) -- (30.2,522) .. controls (24.01,522) and (19,516.99) .. (19,510.8) -- cycle ;
%Curve Lines [id:da580151899278355] 
\draw    (99,193) .. controls (71.91,170.34) and (103.04,144.78) .. (124.05,182.24) ;
\draw [shift={(125,184)}, rotate = 242.3] [color={rgb, 255:red, 0; green, 0; blue, 0 }  ][line width=0.75]    (10.93,-3.29) .. controls (6.95,-1.4) and (3.31,-0.3) .. (0,0) .. controls (3.31,0.3) and (6.95,1.4) .. (10.93,3.29)   ;

% Text Node
\draw (151,210) node   [align=left] {Ready};
% Text Node
\draw (428,204) node   [align=left] {Allocating};
% Text Node
\draw (294,171) node    {$T'\ \neq [] :allocate$};
% Text Node
\draw (153,422) node   [align=left] {Updating};
% Text Node
\draw (555,313) node   [align=left] {Notifying};
% Text Node
\draw (301,31) node   [align=left] {Waiting};
% Text Node
\draw (42,323) node    {$ch_{1} ?\langle t,e' \rangle $};
% Text Node
\draw (192,307) node    {$update$};
% Text Node
\draw (458,88) node    {$alloc=[] :ch_{3} !\langle T',E'\rangle $};
% Text Node
\draw (146,83) node    {$ch_{2} ?\langle T',E',\omega \rangle $};
% Text Node
\draw (423,420) node   [align=left] {Binding};
% Text Node
\draw (570,430) node    {$alloc\neq [] :bind$};
% Text Node
\draw (416,331) node    {$m_{k\ } !\ T'_{k}$};
% Text Node
\draw (567,199) node    {$alloc\neq [] :bind$};
% Text Node
\draw (362,270) node    {$alloc=[] :done$};
% Text Node
\draw (317,641) node    {$ \begin{array}{l}
Var=\{\ alloc:[ \langle \ \mathbb{N} ,[ Task] \ \rangle ] ;\ f\_alloc:([ Task] ,[ FM] ,C2_{ap}) \ \rightarrow [ \langle \ \mathbb{N} ,[ Task] \ \rangle ] ;\ \\
\ \ \ \ \ \ \ \ \ \ \ \ teamStatus:[ FM] \ \rightarrow \ \langle [ Task] ,[ FM] \rangle ;\ T':[ Task] ;\ T_{success} :[ Task] ;\ \\
\ \ \ \ \ \ \ \ \ \ \ \ E':[ FM] ;\ t:Task;\ e' :FM;\ \omega :C2_{ap} ;\ T_{add} :[ Task] \ \}\\
Effect( allocate,\ \eta ) =\ \eta [ alloc:=\ f\_alloc( T',\ E',\ \omega )]\\
Effect( bind,\ \eta ) =\ \eta [ \ \langle k,T'_{k} \rangle :=head( alloc) ;\ alloc:=tail( alloc) \ ]\\
Effect( update,\ \eta ) =\begin{cases}
\eta [ \ T_{success} :=T_{success} \ ++\ [ t] \ ] & \ \ \ \ if\ ( e'=null)\\
\eta [ \ T':=T'++\ [ t] \ ;\ E':=E'( e/e'_{\ })] & \ \ \ \ otherwise
\end{cases} \ \\
Effect( done,\eta ) =\eta [ \ T':=[] \ ]\\
Effect( memberFailure,\eta ) =\eta [ \ \langle T',E'\rangle :=teamStatus( E') \ ]
\end{array}$};
% Text Node
\draw (190,12) node    {$g_{0}$};
% Text Node
\draw (313.76,495) node    {$ \begin{array}{l}
g_{0} :=( T'=[]) \ \land ( f\_alloc\ =\ f_{x}([ t_{1} ,\ ...,t_{n}] \ p_{1} ,\ [ e_{1} ,...,e_{n}] \ p_{2} ,\ C2_{ap} \ p_{3})) \ \\
\ \ \ \ \ \ \ \ \ \land ( T_{success} =[]) \ \land \ ( \omega =\omega _{0})
\end{array}$};
% Text Node
\draw (68,148) node    {$memberFailure$};


\end{tikzpicture}